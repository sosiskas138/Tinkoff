@echo off
chcp 65001 >nul
REM –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ Windows

REM –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ PYTHONPATH
set PYTHONPATH=%PYTHONPATH%;%CD%

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
if "%INVEST_TOKEN%"=="" (
    echo ‚ùå –û—à–∏–±–∫–∞: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è INVEST_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
    echo.
    echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ sandbox —Ç–æ–∫–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π:
    echo   set INVEST_TOKEN=–≤–∞—à_sandbox_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
    echo.
    echo –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã:
    echo   –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
    echo.
    pause
    exit /b 1
)

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Python
python --version >nul 2>&1
if errorlevel 1 (
    echo ‚ùå –û—à–∏–±–∫–∞: Python –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PATH
    echo.
    echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ —Å https://www.python.org/
    echo –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è "Add Python to PATH"
    echo.
    pause
    exit /b 1
)

echo üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
python -c "import flask" >nul 2>&1
if errorlevel 1 (
    echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...
    python -m pip install --upgrade pip
    python -m pip install flask plotly
)

echo.
echo üöÄ –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞...
echo üìä –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8080
echo.
echo –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
echo.

REM –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python web_app.py

if errorlevel 1 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
    echo.
    pause
)


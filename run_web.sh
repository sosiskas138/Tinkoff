#!/bin/bash
# ะกะบัะธะฟั ะดะปั ะทะฐะฟััะบะฐ ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

# ะะพะฑะฐะฒะปัะตะผ ัะตะบัััั ะดะธัะตะบัะพัะธั ะฒ PYTHONPATH
export PYTHONPATH="${PYTHONPATH}:$(pwd)"

# ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต ัะพะบะตะฝะฐ
if [ -z "$INVEST_TOKEN" ]; then
    echo "โ ะัะธะฑะบะฐ: ะฟะตัะตะผะตะฝะฝะฐั ะพะบััะถะตะฝะธั INVEST_TOKEN ะฝะต ัััะฐะฝะพะฒะปะตะฝะฐ"
    echo ""
    echo "ะฃััะฐะฝะพะฒะธัะต sandbox ัะพะบะตะฝ ะบะพะผะฐะฝะดะพะน:"
    echo "  export INVEST_TOKEN='ะฒะฐั_sandbox_ัะพะบะตะฝ_ะทะดะตัั'"
    echo ""
    exit 1
fi

# ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต Flask
if ! python3 -c "import flask" 2>/dev/null; then
    echo "๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน ะดะปั ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ..."
    pip3 install flask plotly
fi

echo "๐ ะะฐะฟััะบ ะฒะตะฑ-ัะตัะฒะตัะฐ..."
echo "๐ ะัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต: http://localhost:8080"
echo ""

# ะะฐะฟััะบะฐะตะผ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต
python3 web_app.py

